/* ========= Brand tokens (from your guide) ========= */
:root {
  --color-dark: #141413; /* Primary text on light; dark backgrounds */
  --color-light: #faf9f5; /* Light backgrounds / text on dark */
  --color-mid: #b0aea5; /* Secondary text */
  --color-lightgray: #e8e6dc; /* Subtle backgrounds */
  --accent-1: #d97757; /* Orange — primary accent */
  --accent-2: #6a9bcc; /* Blue — secondary accent */
  --accent-3: #788c5d; /* Green — tertiary accent */
  --font-headings: "Poppins", Arial, system-ui, -apple-system,
    "Segoe UI", sans-serif;
  --font-body: "Lora", Georgia, "Times New Roman", serif;
  --radius: 16px;
  --shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}

/* Theme wrappers for smart contrast */
.theme--dark {
  --bg-page: var(--color-dark);
  --text-main: var(--color-light);
  --text-muted: color-mix(
    in oklab,
    var(--color-light) 70%,
    var(--color-mid)
  );
  --card-bg: color-mix(in oklab, var(--color-dark) 85%, black);
  --card-border: rgba(250, 249, 245, 0.1);
  --card-grad-top: rgba(250, 249, 245, 0.06);
  --card-grad-bot: rgba(250, 249, 245, 0.03);
}
.theme--light {
  --bg-page: var(--color-light);
  --text-main: var(--color-dark);
  --text-muted: color-mix(
    in oklab,
    var(--color-dark) 60%,
    var(--color-mid)
  );
  --card-bg: #ffffff;
  --card-border: rgba(20, 20, 19, 0.12);
  --card-grad-top: rgba(20, 20, 19, 0.03);
  --card-grad-bot: rgba(20, 20, 19, 0.01);
}

/* Container */
.process {
  position: relative;
  padding: clamp(2rem, 4vw, 4rem);
  color: var(--text-main);
  background: var(--bg-page);
  border-radius: var(--radius);
  overflow: hidden;
  font-family: var(--font-body);
}

/* Headings use Poppins (24pt/32px+) */
.process h1,
.process h2,
.process h3,
.process h4 {
  font-family: var(--font-headings);
  letter-spacing: 0.2px;
}
.process h2 {
  font-size: clamp(1.75rem, 2.5vw, 2.25rem);
  margin: 0 0 0.5rem;
}
.process h3 {
  font-size: 1.1rem;
  margin: 0.15rem 0 0.35rem;
}

.process__header {
  position: relative;
  margin-bottom: 1.5rem;
}
.process__kicker {
  color: var(--text-muted);
  margin: 0;
}

/* Rivian‑style ambient background (sun orb + drifting haze + distant ridges) */
.process__bg {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.95;
  background: radial-gradient(
      140px 140px at 72% 18%,
      var(--accent-1) 0%,
      transparent 60%
    ),
    radial-gradient(
      90px 90px at 78% 24%,
      rgba(255, 255, 255, 0.18) 0%,
      transparent 60%
    ),
    linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.06),
      transparent 30%
    ),
    conic-gradient(
      from 200deg at 28% 110%,
      rgba(255, 255, 255, 0.04),
      transparent 55%,
      rgba(255, 255, 255, 0.04)
    );
  filter: saturate(1.02);
}
.process__bg::before,
.process__bg::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
}
.process__bg::before {
  background: radial-gradient(
      50% 40% at 10% 20%,
      rgba(255, 255, 255, 0.06) 0%,
      transparent 70%
    ),
    radial-gradient(
      40% 30% at 80% 30%,
      rgba(255, 255, 255, 0.05) 0%,
      transparent 70%
    );
  animation: drift 26s linear infinite;
}
.process__bg::after {
  background: radial-gradient(
      70% 60% at -10% 120%,
      rgba(255, 255, 255, 0.03) 0%,
      transparent 60%
    ),
    radial-gradient(
      60% 60% at 120% 130%,
      rgba(255, 255, 255, 0.03) 0%,
      transparent 70%
    );
  transform: translateY(6%);
  animation: parallax 18s ease-in-out infinite;
}
@keyframes drift {
  from {
    transform: translateX(-3%);
  }
  to {
    transform: translateX(3%);
  }
}
@keyframes parallax {
  0%,
  100% {
    transform: translateY(6%);
  }
  50% {
    transform: translateY(2%);
  }
}

/* Steps grid */
.process__steps {
  position: relative;
  counter-reset: step;
  display: grid;
  gap: 1rem;
  margin: 1.5rem 0 1rem;
}

.step {
  position: relative;
  background: linear-gradient(
      180deg,
      var(--card-grad-top),
      var(--card-grad-bot)
    ),
    var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.1rem 1.1rem 1rem 3.75rem;
  box-shadow: var(--shadow);
  transform: translateY(8px);
  opacity: 0;
  will-change: transform, opacity;
}
.step.reveal {
  transform: translateY(0);
  opacity: 1;
  transition: transform 0.6s ease, opacity 0.6s ease;
}
.step p {
  margin: 0 0 0.25rem;
  line-height: 1.5;
}
.step .meta {
  color: var(--text-muted);
  font-size: 0.94rem;
}

/* Number badge with accent cycling: 1→orange, 2→blue, 3→green, repeat */
.step::before {
  counter-increment: step;
  content: counter(step);
  position: absolute;
  left: 1rem;
  top: 1rem;
  width: 2rem;
  height: 2rem;
  display: grid;
  place-items: center;
  border-radius: 10px;
  font-family: var(--font-headings);
  font-weight: 700;
  color: var(--color-light);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.2),
    0 10px 18px rgba(0, 0, 0, 0.35);
  background: radial-gradient(
    circle at 30% 30%,
    var(--accent-1),
    var(--accent-2)
  );
}
.step:nth-child(3n + 1)::before {
  background: radial-gradient(
    circle at 30% 30%,
    var(--accent-1),
    color-mix(in oklab, var(--accent-1) 40%, black)
  );
}
.step:nth-child(3n + 2)::before {
  background: radial-gradient(
    circle at 30% 30%,
    var(--accent-2),
    color-mix(in oklab, var(--accent-2) 40%, black)
  );
}
.step:nth-child(3n + 3)::before {
  background: radial-gradient(
    circle at 30% 30%,
    var(--accent-3),
    color-mix(in oklab, var(--accent-3) 40%, black)
  );
}

.process__disclaimer {
  margin-top: 0.75rem;
  font-size: 0.95rem;
  color: var(--text-muted);
  background: color-mix(in oklab, var(--card-bg) 85%, white 10%);
  border: 1px dashed var(--card-border);
  border-radius: calc(var(--radius) - 8px);
  padding: 0.85rem 1rem;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .step {
    transform: none !important;
    opacity: 1 !important;
  }
  .process__bg,
  .process__bg::before,
  .process__bg::after {
    animation: none !important;
  }
}
