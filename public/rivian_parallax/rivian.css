/* ========== Brand tokens ========== */
:root {
  --color-dark: #141413;
  --color-light: #faf9f5;
  --color-mid: #b0aea5;
  --color-lightgray: #e8e6dc;
  --accent-1: #d97757; /* orange primary */
  --accent-2: #6a9bcc; /* blue secondary */
  --accent-3: #788c5d; /* green tertiary */

  --font-headings: "Poppins", Arial, system-ui, -apple-system, "Segoe UI", sans-serif;
  --font-body: "Lora", Georgia, "Times New Roman", serif;

  --radius: 16px;
  --shadow: 0 10px 30px rgba(0,0,0,.25);
}

.rivian-surface {
  position: relative;
  border-radius: var(--radius);
  overflow: hidden;
  color: var(--color-light);
  background: var(--color-dark);
  padding: clamp(2rem, 4vw, 4rem);
  font-family: var(--font-body);
}

.rivian-surface h1, .rivian-surface h2, .rivian-surface h3, .rivian-surface h4 {
  font-family: var(--font-headings);
  letter-spacing: .2px;
}
.rivian-surface h2 { font-size: clamp(1.75rem, 2.5vw, 2.25rem); margin: 0 0 .5rem; }
.rivian-surface h3 { font-size: 1.1rem; margin: .15rem 0 .35rem; }
.rivian-surface p  { line-height: 1.5; }

.rivian-bg {
  position: absolute; inset: 0; pointer-events: none; overflow: hidden; z-index: 0;
}
.rivian-layer { position: absolute; inset: 0; will-change: transform, opacity; transform: translateZ(0); }

/* Procedural (CSS) layers */
.rivian-layer--sky {
  background:
    radial-gradient(140px 140px at 72% 18%, var(--accent-1) 0%, transparent 60%),
    radial-gradient(90px 90px at 78% 24%, rgba(255,255,255,.18) 0%, transparent 60%),
    linear-gradient(to bottom, rgba(255,255,255,.06), transparent 30%),
    conic-gradient(from 200deg at 28% 110%, rgba(255,255,255,.04), transparent 55%, rgba(255,255,255,.04));
  filter: saturate(1.02);
}
.rivian-layer--haze {
  background:
    radial-gradient(50% 40% at 10% 20%, rgba(255,255,255,.06) 0%, transparent 70%),
    radial-gradient(40% 30% at 80% 30%, rgba(255,255,255,.05) 0%, transparent 70%);
  animation: rivian-drift 26s linear infinite;
}
.rivian-layer--ridge-left {
  background: radial-gradient(70% 60% at -10% 120%, rgba(255,255,255,.03) 0%, transparent 60%);
  transform: translateY(6%);
  animation: rivian-parallax 18s ease-in-out infinite;
}
.rivian-layer--ridge-right {
  background: radial-gradient(60% 60% at 120% 130%, rgba(255,255,255,.03) 0%, transparent 70%);
  transform: translateY(6%);
  animation: rivian-parallax 18s ease-in-out infinite reverse;
}

/* Content elevation */
.rivian-surface > *:not(.rivian-bg) { position: relative; z-index: 1; }

/* Steps */
.rivian-steps { counter-reset: step; display: grid; gap: 1rem; margin: 1.5rem 0 1rem; }
.rivian-step {
  background: linear-gradient(180deg, rgba(250,249,245,.06), rgba(250,249,245,.03)), color-mix(in oklab, var(--color-dark) 85%, black);
  border: 1px solid rgba(250,249,245,.10); border-radius: calc(var(--radius) - 4px);
  padding: 1.1rem 1.1rem 1rem 3.75rem; box-shadow: var(--shadow); opacity: 0; transform: translateY(8px);
}
.rivian-step.reveal { opacity: 1; transform: translateY(0); transition: transform .6s ease, opacity .6s ease; }
.rivian-step::before {
  counter-increment: step; content: counter(step); position: absolute; left: 1rem; top: 1rem; width: 2rem; height: 2rem; display: grid; place-items: center;
  border-radius: 10px; color: var(--color-light); font: 700 1rem var(--font-headings); border: 1px solid rgba(255,255,255,.18);
  box-shadow: inset 0 0 0 2px rgba(255,255,255,.2), 0 10px 18px rgba(0,0,0,.35); background: radial-gradient(circle at 30% 30%, var(--accent-1), var(--accent-2));
}
.rivian-step:nth-child(3n+1)::before { background: radial-gradient(circle at 30% 30%, var(--accent-1), color-mix(in oklab, var(--accent-1) 40%, black)); }
.rivian-step:nth-child(3n+2)::before { background: radial-gradient(circle at 30% 30%, var(--accent-2), color-mix(in oklab, var(--accent-2) 40%, black)); }
.rivian-step:nth-child(3n+3)::before { background: radial-gradient(circle at 30% 30%, var(--accent-3), color-mix(in oklab, var(--accent-3) 40%, black)); }

.rivian-meta { color: color-mix(in oklab, var(--color-light) 70%, var(--color-mid)); font-size: .94rem; }
.rivian-note { margin-top: .75rem; font-size: .95rem; color: color-mix(in oklab, var(--color-light) 70%, var(--color-mid)); background: color-mix(in oklab, rgba(0,0,0,1) 85%, white 10%); border: 1px dashed rgba(250,249,245,.10); border-radius: calc(var(--radius) - 8px); padding: .85rem 1rem; }

/* Motion */
@keyframes rivian-drift { from { transform: translateX(-3%);} to { transform: translateX(3%);} }
@keyframes rivian-parallax { 0%,100% { transform: translateY(6%);} 50% { transform: translateY(2%);} }

/* ======= ASSET MODE OVERRIDES ======= */
.rivian-using-assets .rivian-layer--sky { background: url('/rivian_parallax/layers/sky.svg') center / cover no-repeat; filter: none; }
.rivian-using-assets .rivian-layer--haze { background: url('/rivian_parallax/layers/haze.svg') center / cover no-repeat; }
.rivian-using-assets .rivian-layer--ridge-left { background: url('/rivian_parallax/layers/ridge-left.svg') bottom left / cover no-repeat; }
.rivian-using-assets .rivian-layer--ridge-right { background: url('/rivian_parallax/layers/ridge-right.svg') bottom right / cover no-repeat; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .rivian-layer--haze, .rivian-layer--ridge-left, .rivian-layer--ridge-right { animation: none !important; transform: none !important; }
  .rivian-step { transform: none !important; opacity: 1 !important; }
}
